# 03.bean-web-scope

스프링 웹 앱에만 있는 빈 소코프 == 웹 스코프 (web scope)

요청 스코프(request scope) : 각 HTTP 요청에 대해 빈 클래스의 인스턴스를 생성. 이 인스턴스는 해당 HTTP 요청에서만 존재
세션 스코프(session scope) : HTTP 세션 동안 서버의 메모리에 이 인스턴스 유지. 컨텍스트에서 이 인스턴스를 클라이언트의 세션과 연결
애플리케이션 스코프(application scope) : 인스턴스는 앱의 컨텍스트에 고유. (글로벌)

![request vs session](https://freecontent.manning.com/wp-content/uploads/using-the-spring-web-scopes-part2_02.png)

## 요청 스코프 빈의 핵심 과정

스프링은 모든 클라이언트 HTTP 요청마다 새 인스턴스를 생성
하나의 요청만 요청 스코프 빈 인스턴스를 사용할 수 있음

실행 중에 앱 메모리에 해당 빈의 인스턴스를 많이 생성
요청 스코프 빈 인스턴스는 하나의 스레드만 액세스할 수 있으며 멀티스레드 관련 문제가 발생하지 않음

인스턴스 수명이 짧기 때문에 일반적으로는 문제가 안됨

인스턴스를 생성하는데 스프링이 실행해야 하는 시간 소모적인 로직(DB 질의, 네트워크 호출 등)은 구현하면 안됨.
요청스코프 빈에 @PostConstruct 메서드에 로직을 작성하면 안됨

## 세션 스코프 빈

세션 스코프 빈의 인스턴스는 전체 세션 기간 동안 유지
여러 요청이 세션 스코프 빈의 인스턴스를 공유
세션 스코프 빈은 데이터를 서버 측에 보관하여 요청 간 데이터를 공유

요청 스코프 빈보다 수명이 길고 GC 빈도도 낮음
동일한 클라이언트가 인스턴스의 데이터를 변경하는 요청을 동시에 다수 실행하면 경쟁 조건 같은 멀티 스레딩 관련 문제가 발생할 수 있음
